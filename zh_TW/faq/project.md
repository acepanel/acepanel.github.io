# 項目常見問題

## 項目啟動失敗

點擊「日誌」查看錯誤信息。 常見原因：

### 權限問題

項目目錄應在 `/opt/ace/projects/` 下，所有者為 www：

```shell
chown -R www:www /opt/ace/projects/項目名
```

如果部署在 `/root` 下，需使用 root 用戶運行（不推薦）。

### 找不到命令

如 `node: No such file or directory`，說明環境變數未配置。

解決方法：

1. 在「編輯」->「依賴」中關聯運行環境
2. 或在「運行設置」->「環境變數」中添加 PATH

### 端口被佔用

修改應用監聽端口，或停止佔用端口的進程：

```shell
lsof -i:3000  # 查看佔用端口的進程
```

## 配置環境變數

「編輯」->「運行設置」->「環境變數」，點擊「添加」。

常用配置：

- `NODE_ENV=production`
- `PORT=3000`

## 預啟動命令

在項目啟動前執行，如安裝依賴：

- Node.js：`npm install` 或 `yarn`
- Python：`pip install -r requirements.txt`
- Go：`go build`

## 查看項目日誌

1. 面板：項目列表點擊「日誌」
2. 命令行：`journalctl -u ace-project-項目名 -f`

## 項目自動重啟

在「運行設置」中配置：

- **重啟策略**：失敗時重啟 / 總是重啟 / 不重啟
- **重啟間隔**：兩次重啟之間的等待時間
- **最大重啟次數**：防止無限重啟

## 反向代理配置

創建項目時開啟「反向代理」，會自動創建一個反向代理網站。

手動配置：創建反向代理網站，上游地址填 `http://127.0.0.1:項目端口`。
