# 計劃任務

計劃任務用於設置定時執行的任務，如定時備份、定時執行腳本等。

## 任務列表

進入 **任務** 頁面，默認顯示計劃任務列表。

![計劃任務](/images/task/task-schedule.png)

列表顯示以下信息：

- **任務名稱**：任務名稱
- **任務類型**：Shell/備份等
- **已啟用**：是否啟用
- **任務週期**：執行週期
- **創建時間**：創建時間
- **最後更新時間**：最後執行時間
- **操作**：編輯、執行、刪除等

## 創建任務

點擊 **創建任務** 按鈕創建新的計劃任務。

### 任務類型

| 類型    | 說明             |
| ----- | -------------- |
| 運行腳本  | 執行 Shell 命令或腳本 |
| 備份網站  | 定時備份網站文件       |
| 備份數據庫 | 定時備份數據庫        |
| 日誌輪替  | 定時切割日誌文件       |

### 執行週期

支持多種週期設置：

- **每分鐘**：每分鐘執行一次
- **每小時**：每小時執行一次
- **每天**：每天指定時間執行
- **每週**：每週指定日期和時間執行
- **每月**：每月指定日期和時間執行
- **自定義**：使用 Cron 表達式

### Cron 表達式

Cron 表達式格式：`分 時 日 月 週`

```
*    *    *    *    *
│    │    │    │    │
│    │    │    │    └── 週幾 (0-7, 0和7都是週日)
│    │    │    └─────── 月份 (1-12)
│    │    └──────────── 日期 (1-31)
│    └───────────────── 小時 (0-23)
└────────────────────── 分鐘 (0-59)
```

常用示例：

| 表達式           | 說明       |
| ------------- | -------- |
| `0 2 * * *`   | 每天凌晨 2 點 |
| `0 */6 * * *` | 每 6 小時   |
| `0 0 * * 0`   | 每週日凌晨    |
| `0 0 1 * *`   | 每月 1 號凌晨 |
| `*/5 * * * *` | 每 5 分鐘   |

不會寫？ 直接找個 AI 描述清楚需求讓它幫你生成一個。

## Shell 任務示例

### 清理臨時文件

```bash
find /tmp -type f -mtime +7 -delete
```

### 重啟服務

```bash
systemctl restart nginx
```

### 同步時間

```bash
ntpdate ntp.aliyun.com
```

## 任務操作

### 啟用/禁用

通過開關控制任務是否啟用。 禁用的任務不會執行。

### 立即執行

點擊 **運行** 按鈕可以立即執行任務，不等待計劃時間。

### 查看日誌

點擊 **日誌** 按鈕查看任務的執行日誌。

### 編輯任務

點擊 **編輯** 按鈕修改任務配置。

### 刪除任務

點擊 **刪除** 按鈕刪除任務。

## 注意事項

1. 任務執行時間基於服務器時區
2. 長時間運行的任務可能影響下次執行
3. 建議為重要任務設置通知提醒
4. 定期檢查任務執行狀態
