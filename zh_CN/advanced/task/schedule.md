# 计划任务

计划任务用于设置定时执行的任务，如定时备份、定时执行脚本等。

## 任务列表

进入 **任务** 页面，默认显示计划任务列表。

![计划任务](/images/task/task-schedule.png)

列表显示以下信息：

- **任务名称**：任务名称
- **任务类型**：Shell/备份等
- **已启用**：是否启用
- **任务周期**：执行周期
- **创建时间**：创建时间
- **最后更新时间**：最后执行时间
- **操作**：编辑、执行、删除等

## 创建任务

点击 **创建任务** 按钮创建新的计划任务。

### 任务类型

| 类型    | 说明             |
| ----- | -------------- |
| 运行脚本  | 执行 Shell 命令或脚本 |
| 备份网站  | 定时备份网站文件       |
| 备份数据库 | 定时备份数据库        |
| 日志切割  | 定时切割日志文件       |

### 执行周期

支持多种周期设置：

- **每分钟**：每分钟执行一次
- **每小时**：每小时执行一次
- **每天**：每天指定时间执行
- **每周**：每周指定日期和时间执行
- **每月**：每月指定日期和时间执行
- **自定义**：使用 Cron 表达式

### Cron 表达式

Cron 表达式格式：`分 时 日 月 周`

```
*    *    *    *    *
│    │    │    │    │
│    │    │    │    └── 周几 (0-7, 0和7都是周日)
│    │    │    └─────── 月份 (1-12)
│    │    └──────────── 日期 (1-31)
│    └───────────────── 小时 (0-23)
└────────────────────── 分钟 (0-59)
```

常用示例：

| 表达式           | 说明       |
| ------------- | -------- |
| `0 2 * * *`   | 每天凌晨 2 点 |
| `0 */6 * * *` | 每 6 小时   |
| `0 0 * * 0`   | 每周日凌晨    |
| `0 0 1 * *`   | 每月 1 号凌晨 |
| `*/5 * * * *` | 每 5 分钟   |

不会写？ 直接找个 AI 描述清楚需求让它帮你生成一个。

## Shell 任务示例

### 清理临时文件

```bash
find /tmp -type f -mtime +7 -delete
```

### 重启服务

```bash
systemctl restart nginx
```

### 同步时间

```bash
ntpdate ntp.aliyun.com
```

## 任务操作

### 启用/禁用

通过开关控制任务是否启用。 禁用的任务不会执行。

### 立即执行

点击 **运行** 按钮可以立即执行任务，不等待计划时间。

### 查看日志

点击 **日志** 按钮查看任务的执行日志。

### 编辑任务

点击 **编辑** 按钮修改任务配置。

### 删除任务

点击 **删除** 按钮删除任务。

## 注意事项

1. 任务执行时间基于服务器时区
2. 长时间运行的任务可能影响下次执行
3. 建议为重要任务设置通知提醒
4. 定期检查任务执行状态
